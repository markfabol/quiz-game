<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Mission Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&family=Exo+2:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Exo 2', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 25%, #16213e 50%, #0f3460 100%);
            color: #00ff41;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        .space-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .star-field {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #ffffff;
            border-radius: 50%;
            animation: starTwinkle 4s infinite;
        }
        
        @keyframes starTwinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }
        
        .satellite {
            position: absolute;
            width: 30px;
            height: 30px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            animation: satelliteOrbit 20s linear infinite;
            filter: drop-shadow(0 0 10px #ff6b35);
        }
        
        @keyframes satelliteOrbit {
            0% { transform: translateX(-100px) translateY(0px) rotate(0deg); }
            25% { transform: translateX(100vw) translateY(-100px) rotate(90deg); }
            50% { transform: translateX(calc(100vw + 100px)) translateY(100vh) rotate(180deg); }
            75% { transform: translateX(-100px) translateY(calc(100vh + 100px)) rotate(270deg); }
            100% { transform: translateX(-100px) translateY(0px) rotate(360deg); }
        }
        
        .radar-sweep {
            position: absolute;
            width: 200px;
            height: 200px;
            border: 2px solid #00ff41;
            border-radius: 50%;
            opacity: 0.3;
            animation: radarScan 8s linear infinite;
        }
        
        @keyframes radarScan {
            0% { transform: scale(0.5) rotate(0deg); opacity: 0.8; }
            100% { transform: scale(3) rotate(360deg); opacity: 0; }
        }
        
        .container {
            position: relative;
            z-index: 2;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .mission-control {
            background: linear-gradient(145deg, rgba(12, 12, 12, 0.95), rgba(26, 26, 46, 0.95));
            border: 4px solid #00ff41;
            border-radius: 20px;
            box-shadow: 
                0 0 60px rgba(0, 255, 65, 0.4),
                inset 0 0 60px rgba(0, 255, 65, 0.1);
            max-width: 1400px;
            width: 100%;
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .mission-control::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #ff0000, #ff6b35, #ffff00, #00ff41, #0099ff, #6633ff);
            background-size: 300% 100%;
            animation: statusLights 3s linear infinite;
        }
        
        @keyframes statusLights {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        
        .control-header {
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.2), rgba(0, 153, 255, 0.2));
            padding: 40px;
            text-align: center;
            position: relative;
            border-bottom: 3px solid #00ff41;
        }
        
        .control-header::before {
            content: '◄ MISSION CONTROL ACTIVE ►';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.8rem;
            color: #ff6b35;
            animation: systemBlink 2s infinite;
        }
        
        @keyframes systemBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .mission-title {
            font-family: 'Orbitron', monospace;
            font-size: 3.5rem;
            font-weight: 900;
            color: #00ff41;
            text-shadow: 0 0 30px rgba(0, 255, 65, 0.8);
            margin-bottom: 15px;
            position: relative;
        }
        
        .mission-subtitle {
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.2rem;
            color: #0099ff;
            font-weight: 400;
            text-shadow: 0 0 15px rgba(0, 153, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        
        .command-center {
            padding: 50px;
        }
        
        .mission-briefing {
            background: linear-gradient(145deg, rgba(0, 255, 65, 0.1), rgba(0, 153, 255, 0.1));
            border: 2px solid #00ff41;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .mission-briefing::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.2), transparent);
            animation: scanLine 3s infinite;
        }
        
        @keyframes scanLine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .briefing-text {
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.1rem;
            color: #00ff41;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .launch-status {
            font-size: 0.9rem;
            color: #ff6b35;
            animation: statusPulse 2s infinite;
            position: relative;
            z-index: 1;
        }
        
        @keyframes statusPulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        .mission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .mission-module {
            background: linear-gradient(145deg, rgba(12, 12, 12, 0.9), rgba(26, 26, 46, 0.9));
            border: 3px solid #0099ff;
            border-radius: 20px;
            padding: 35px 25px;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            text-align: center;
        }
        
        .mission-module::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(0, 255, 65, 0.1) 2px, transparent 2px),
                radial-gradient(circle at 80% 80%, rgba(0, 153, 255, 0.1) 2px, transparent 2px);
            background-size: 30px 30px;
            animation: gridPattern 10s linear infinite;
            pointer-events: none;
        }
        
        @keyframes gridPattern {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 30px); }
        }
        
        .mission-module:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: #00ff41;
            box-shadow: 0 15px 40px rgba(0, 255, 65, 0.3);
        }
        
        .module-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle at 30% 30%, #00ff41, #0099ff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            animation: indicatorPulse 3s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }
        
        @keyframes indicatorPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }
        
        .module-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 15px currentColor);
            animation: iconHover 5s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }
        
        @keyframes iconHover {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        .module-name {
            font-family: 'Orbitron', monospace;
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #00ff41;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
        }
        
        .module-description {
            font-size: 0.95rem;
            line-height: 1.5;
            color: #0099ff;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .difficulty-matrix {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-top: 20px;
        }
        
        .matrix-cell {
            width: 15px;
            height: 15px;
            background: #333;
            border: 1px solid #555;
            transition: all 0.3s ease;
        }
        
        .matrix-cell.active {
            background: linear-gradient(45deg, #ff6b35, #00ff41);
            box-shadow: 0 0 10px #ff6b35;
            animation: matrixGlow 2s ease-in-out infinite;
        }
        
        @keyframes matrixGlow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .mission-session {
            display: none;
        }
        
        .mission-session.active {
            display: block;
        }
        
        .session-hud {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .abort-mission {
            background: linear-gradient(45deg, #ff0000, #cc0000);
            color: #ffffff;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            font-size: 0.9rem;
            font-weight: 700;
            transition: all 0.3s ease;
            text-transform: uppercase;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
            animation: emergencyBlink 3s infinite;
        }
        
        @keyframes emergencyBlink {
            0%, 90% { opacity: 1; }
            95% { opacity: 0.5; }
        }
        
        .abort-mission:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.6);
        }
        
        .hud-displays {
            display: flex;
            gap: 25px;
            align-items: center;
        }
        
        .hud-screen {
            background: linear-gradient(45deg, rgba(0, 255, 65, 0.2), rgba(0, 153, 255, 0.2));
            border: 2px solid #00ff41;
            color: #00ff41;
            padding: 12px 25px;
            border-radius: 20px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.3);
            text-shadow: 0 0 8px rgba(0, 255, 65, 0.8);
            text-transform: uppercase;
        }
        
        .mission-progress {
            background: rgba(0, 0, 0, 0.8);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid #00ff41;
            margin-bottom: 40px;
            box-shadow: inset 0 0 15px rgba(0, 255, 65, 0.3);
        }
        
        .progress-beam {
            background: linear-gradient(90deg, #ff6b35, #ffff00, #00ff41, #0099ff);
            background-size: 400% 100%;
            height: 100%;
            transition: width 1s ease;
            border-radius: 12px;
            animation: energyFlow 3s infinite;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.6);
        }
        
        @keyframes energyFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .command-display {
            background: linear-gradient(145deg, rgba(0, 255, 65, 0.1), rgba(0, 153, 255, 0.1));
            border: 3px solid #00ff41;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 25px;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.2);
            position: relative;
            backdrop-filter: blur(5px);
        }
        
        .command-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(45deg, transparent 49%, rgba(0, 255, 65, 0.05) 50%, transparent 51%);
            background-size: 20px 20px;
            animation: commandPattern 12s linear infinite;
            pointer-events: none;
        }
        
        @keyframes commandPattern {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(20px, 20px) rotate(360deg); }
        }
        
        .command-text {
            font-family: 'Orbitron', monospace;
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 35px;
            text-align: center;
            color: #00ff41;
            text-shadow: 0 0 15px rgba(0, 255, 65, 0.8);
            position: relative;
            z-index: 1;
            line-height: 1.4;
        }
        
        .response-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .response-panel {
            background: linear-gradient(145deg, rgba(12, 12, 12, 0.95), rgba(26, 26, 46, 0.95));
            color: #ffffff;
            border: 2px solid #0099ff;
            padding: 30px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            text-align: center;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(8px);
        }
        
        .response-panel::before {
            content: '●';
            position: absolute;
            top: 15px;
            left: 20px;
            font-size: 1.2rem;
            color: #0099ff;
            animation: statusDot 2s ease-in-out infinite;
        }
        
        @keyframes statusDot {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        .response-panel:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: #00ff41;
            box-shadow: 0 15px 40px rgba(0, 255, 65, 0.3);
        }
        
        .response-panel.correct {
            background: linear-gradient(145deg, rgba(0, 150, 0, 0.8), rgba(0, 100, 0, 0.8));
            border-color: #00ff41;
            animation: correctSignal 1s ease;
        }
        
        .response-panel.incorrect {
            background: linear-gradient(145deg, rgba(150, 0, 0, 0.8), rgba(100, 0, 0, 0.8));
            border-color: #ff0000;
            animation: errorGlitch 0.8s ease;
        }
        
        @keyframes correctSignal {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes errorGlitch {
            0%, 100% { transform: translateX(0) skew(0deg); }
            20% { transform: translateX(-10px) skew(-2deg); }
            40% { transform: translateX(10px) skew(2deg); }
            60% { transform: translateX(-5px) skew(-1deg); }
            80% { transform: translateX(5px) skew(1deg); }
        }
        
        .mission-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 35px;
        }
        
        .control-btn {
            background: linear-gradient(45deg, rgba(100, 100, 100, 0.8), rgba(50, 50, 50, 0.8));
            color: #ffffff;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .control-btn:hover {
            background: linear-gradient(45deg, rgba(150, 150, 150, 0.8), rgba(100, 100, 100, 0.8));
            transform: translateY(-2px);
        }
        
        .control-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }
        
        .control-btn.primary {
            background: linear-gradient(45deg, rgba(0, 255, 65, 0.8), rgba(0, 153, 255, 0.8));
            color: #000000;
        }
        
        .control-btn.primary:hover {
            box-shadow: 0 8px 25px rgba(0, 255, 65, 0.4);
        }
        
        .mission-complete {
            text-align: center;
            padding: 80px 40px;
        }
        
        .complete-icon {
            font-size: 8rem;
            margin-bottom: 40px;
            animation: completePulse 3s ease-in-out infinite;
            filter: drop-shadow(0 0 40px currentColor);
        }
        
        @keyframes completePulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(10deg); }
        }
        
        .complete-title {
            font-family: 'Orbitron', monospace;
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 30px;
            color: #00ff41;
            text-shadow: 0 0 40px rgba(0, 255, 65, 0.8);
        }
        
        .mission-score {
            font-size: 4rem;
            font-weight: 800;
            color: #0099ff;
            margin-bottom: 25px;
            text-shadow: 0 0 30px rgba(0, 153, 255, 0.8);
            font-family: 'Orbitron', monospace;
        }
        
        .score-rating {
            font-size: 2.5rem;
            color: #ff6b35;
            margin-bottom: 35px;
            text-shadow: 0 0 25px rgba(255, 107, 53, 0.8);
            font-weight: 700;
        }
        
        .commander-report {
            font-size: 1.2rem;
            margin-bottom: 50px;
            line-height: 1.7;
            color: #00ff41;
            opacity: 0.95;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .new-mission-btn {
            background: linear-gradient(45deg, #ff6b35, #00ff41, #0099ff);
            background-size: 200% 100%;
            color: #000000;
            border: none;
            padding: 25px 50px;
            border-radius: 15px;
            font-family: 'Orbitron', monospace;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s ease;
            box-shadow: 0 15px 40px rgba(255, 107, 53, 0.4);
            animation: missionGlow 4s ease-in-out infinite;
            text-transform: uppercase;
        }
        
        @keyframes missionGlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .new-mission-btn:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 50px rgba(255, 107, 53, 0.6);
        }
        
        @media (max-width: 768px) {
            .mission-title {
                font-size: 2.5rem;
            }
            
            .command-center {
                padding: 30px;
            }
            
            .mission-grid {
                grid-template-columns: 1fr;
            }
            
            .command-display {
                padding: 25px;
            }
            
            .command-text {
                font-size: 1.2rem;
            }
            
            .response-grid {
                grid-template-columns: 1fr;
            }
            
            .hud-displays {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="space-field" id="spaceField"></div>
    
    <div class="container">
        <div class="mission-control">
            <div class="control-header">
                <div class="mission-title">AZERON QUIZ GAME</div>
                <div class="mission-subtitle">THESE TERMS WILL help you not only as you study for your appraisal exam, but also after you pass your exam and are on the job every day.</div>
            </div>
            
            <div class="command-center">
                <!-- Mission Selection -->
                <div id="missionSelection">
                    <div class="mission-briefing">
                        <div class="briefing-text">Commander, select your mission parameters</div>
                        <div class="launch-status">● All systems operational - Ready for launch</div>
                    </div>
                    
                    <div class="mission-grid">
                        <div class="mission-module" onclick="launchMission('solar')">
                            <div class="module-indicator">🪐</div>
                            <div class="module-icon">🌌</div>
                            <div class="module-name">QUIZ 1</div>
                            <div class="difficulty-matrix">
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell"></div>
                                <div class="matrix-cell"></div>
                                <div class="matrix-cell"></div>
                            </div>
                        </div>
                        
                        <div class="mission-module" onclick="launchMission('rockets')">
                            <div class="module-indicator">🚀</div>
                            <div class="module-icon">🛰️</div>
                            <div class="module-name">QUIZ 2</div>
                            <div class="difficulty-matrix">
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell"></div>
                                <div class="matrix-cell"></div>
                            </div>
                        </div>
                        
                        <div class="mission-module" onclick="launchMission('astronauts')">
                            <div class="module-indicator">👨‍🚀</div>
                            <div class="module-icon">🧑‍🚀</div>
                            <div class="module-name">QUIZ 3</div>
                            <div class="difficulty-matrix">
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell"></div>
                                <div class="matrix-cell"></div>
                            </div>
                        </div>
                        
                        <div class="mission-module" onclick="launchMission('history')">
                            <div class="module-indicator">📡</div>
                            <div class="module-icon">🌍</div>
                            <div class="module-name">QUIZ 4</div>
                            <div class="difficulty-matrix">
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell"></div>
                            </div>
                        </div>
                        
                        <div class="mission-module" onclick="launchMission('aliens')">
                            <div class="module-indicator">👽</div>
                            <div class="module-icon">🛸</div>
                            <div class="module-name">QUIZ 5</div>
                            <div class="difficulty-matrix">
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                                <div class="matrix-cell active"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mission Session -->
                <div id="missionSession" class="mission-session">
                    <div class="session-hud">
                        <button class="abort-mission" onclick="abortMission()">⚠ ABORT MISSION</button>
                        <div class="hud-displays">
                            <div class="hud-screen" id="commandCounter">CMD: 1/5</div>
                            <div class="hud-screen" id="successCounter">SUCCESS: 0</div>
                        </div>
                    </div>
                    
                    <div class="mission-progress">
                        <div class="progress-beam" id="progressBeam"></div>
                    </div>
                    
                    <div class="command-display">
                        <div class="command-text" id="commandText"></div>
                        <div class="response-grid" id="responseGrid"></div>
                    </div>
                    
                    <div class="mission-controls">
                        <button class="control-btn" id="prevCommand" onclick="previousCommand()" disabled>← PREVIOUS</button>
                        <button class="control-btn primary" id="nextCommand" onclick="nextCommand()" style="display: none;">NEXT COMMAND →</button>
                    </div>
                </div>
                
                <!-- Mission Complete -->
                <div id="missionComplete" class="mission-session">
                    <div class="mission-complete">
                        <div class="complete-icon" id="completeIcon">🏆</div>
                        <div class="complete-title">MISSION COMPLETE</div>
                        <div class="mission-score" id="finalSuccess">0/5</div>
                        <div class="score-rating" id="successRate">0%</div>
                        <div class="commander-report" id="commanderReport"></div>
                        <button class="new-mission-btn" onclick="newMission()">Launch New Mission</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Create space field
        function createSpaceField() {
            const spaceField = document.getElementById('spaceField');
            
            // Create stars
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star-field';
                
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 4 + 's';
                star.style.animationDuration = (3 + Math.random() * 3) + 's';
                
                spaceField.appendChild(star);
            }
            
            // Create satellites
            for (let i = 0; i < 3; i++) {
                const satellite = document.createElement('div');
                satellite.className = 'satellite';
                
                satellite.style.left = Math.random() * 100 + '%';
                satellite.style.top = Math.random() * 100 + '%';
                satellite.style.animationDelay = Math.random() * 20 + 's';
                satellite.style.animationDuration = (15 + Math.random() * 10) + 's';
                
                spaceField.appendChild(satellite);
            }
            
            // Create radar sweeps
            for (let i = 0; i < 4; i++) {
                const radar = document.createElement('div');
                radar.className = 'radar-sweep';
                
                radar.style.left = Math.random() * 100 + '%';
                radar.style.top = Math.random() * 100 + '%';
                radar.style.animationDelay = Math.random() * 8 + 's';
                
                spaceField.appendChild(radar);
            }
        }
        
        createSpaceField();

        const missionData = {
            solar: [
                {
    question: "Complete set of all items in a specific category.",
    options: ["Population", "Sample", "Census", "Demographics"],
    correct: 0
},
{
    question: "When the cost of borrowed money is less than the property yield",
    options: ["Positive leverage", "Negative leverage", "Financial leverage", "Equity leverage"],
    correct: 0
},
{
    question: "Total operating income produced by a real property, assuming full occupancy and before operating expenses are deducted, including vending, garage fees, washer/dryers, etc.",
    options: ["Potential gross income (PGI)", "Net operating income (NOI)", "Effective gross income (EGI)", "Gross rent multiplier (GRM)"],
    correct: 0
},
{
    question: "Ratio of sales price or value to the potential gross income.",
    options: ["Potential gross income multiplier (PGIM)", "Capitalization rate", "Loan-to-value ratio", "Gross income return"],
    correct: 0
},
{
    question: "Combining two or more parcels to make them more valuable for a particular purpose.",
    options: ["Pottage", "Assemblage", "Subdividing", "Partition"],
    correct: 0
},
{
    question: "A legal document that authorizes someone to act on another's behalf. A power of attorney can grant complete authority or can be limited to certain acts and/or certain periods of time.",
    options: ["Power of attorney", "Proxy", "Deed", "Authorization form"],
    correct: 0
},
{
    question: "Condition where a borrower has completed a loan application and provided debt, income, and savings documentation that an underwriter has reviewed and approved. A preapproval is usually done at a certain loan amount, making assumptions about what the interest rate will actually be at the time the loan is actually made, as well as estimates for the amount that will be paid for property taxes, insurance, and so on.",
    options: ["Preapproval", "Prequalification", "Commitment letter", "Approval notice"],
    correct: 0
},
{
    question: "Amount paid to reduce the outstanding principal balance of a loan before the due date.",
    options: ["Prepayment", "Refinancing", "Principal payment", "Discounting"],
    correct: 0
},
{
    question: "A fee charged to a borrower by a lender for paying off a debt before the term of the loan expires.",
    options: ["Prepayment penalty", "Late payment fee", "Origination fee", "Interest charge"],
    correct: 0
},
{
    question: "A lender's opinion on the ability of a borrower to qualify for a loan, based on furnished information regarding debt, income, and available capital for down payment, closing costs, and prepaids. Prequalification is less formal than preapproval.prescription a method of acquiring an easement to property by prolonged, unauthorized use.",
    options: ["Prequalification", "Preapproval", "Commitment", "Underwriting"],
    correct: 0
},
{
    question: "The rights of ownership to land and its improvements.",
    options: ["Real property", "Personal property", "Chattel", "Fixture"],
    correct: 0
},
{
    question: "A registered trademark for use by members of the National Association of  REALTORS® and affiliated state and local associations.",
    options: ["REALTOR®", "Broker", "Agent", "Salesperson"],
    correct: 0
},
{
    question: "In the sales comparison approach, the reviewing of each sale and judging the comparability to the subject property.",
    options: ["Reconciliation", "Adjustment", "Appraisal", "Final estimate"],
    correct: 0
},
{
    question: "Legal method of land description.",
    options: ["Recorded plat", "Metes and bounds", "Rectangular survey", "Parcel map"],
    correct: 0
},
{
    question: "Entering documents, such as deeds and mortgages, into the public record to give constructive notice.",
    options: ["Recording", "Registration", "Filing", "Certification"],
    correct: 0
},
{
    question: "A mortgage that is in less than first lien position; see junior mortgage.",
    options: ["Secondary mortgage", "First mortgage", "Construction loan", "Bridge loan"],
    correct: 0
},
{
    question: "A market that exists for the sale and purchase of existing mortgages; it provides more liquidity for the mortgage market.",
    options: ["Secondary mortgage market", "Primary mortgage market", "Capital market", "Money market"],
    correct: 0
},
{
    question: "In the rectangular survey method of legally describing land, it equals one square mile, or 640 acres,orof a township.secured loan a loan that is backed by property or collateral.security property that is offered as collateral for a loan.",
    options: ["Section", "Township", "Range", "Tract"],
    correct: 0
},
{
    question: "The broker who secures a buyer for a listed property; the selling broker may be the listing agent, a subagent, or a buyer's agent.",
    options: ["Selling broker", "Listing broker", "Cooperating broker", "Dual agent"],
    correct: 0
},
{
    question: "Property owned individually by a spouse, as opposed to community property.",
    options: ["Separate property", "Community property", "Joint property", "Marital property"],
    correct: 0
}
            ],
            rockets: [
                {
    question: "Current worth of a payment or payments based on the time value of money; future payments are discounted to an equivalent current value by a discount rate based on the premise that cash flows received sooner are more valuable than cash flows received later.",
    options: ["Present value (PV)", "Future value (FV)", "Discount rate", "Capitalization rate"],
    correct: 0
},
{
    question: "Net operating income minus the debt service.",
    options: ["Pre-tax cash flow", "After-tax cash flow", "Net operating income", "Gross income"],
    correct: 0
},
{
    question: "The sum or amount of money for which property can be offered, bought, or sold.",
    options: ["Price", "Cost", "Value", "Equity"],
    correct: 0
},
{
    question: "Market the financial market in which loans are originated, funded, and serviced.",
    options: ["Primary mortgage market", "Secondary mortgage market", "Capital market", "Money market"],
    correct: 0
},
{
    question: "The short-term interest rate that banks charge to their preferred customers. Changes in prime rate are used as the indexes in some adjustable-rate mortgages, such as home equity lines of credit.",
    options: ["Prime rate", "Discount rate", "Federal funds rate", "LIBOR"],
    correct: 0
},
{
    question: "(1) One who authorizes another to act on his or her behalf; (2) one of the contracting parties to a transaction; (3) the amount of money borrowed in a loan, separate from the interest charged on it.",
    options: ["Principal", "Agent", "Trustee", "Borrower"],
    correct: 0
},
{
    question: "An off-schedule mortgage payment applied only to the principal balance.",
    options: ["Principal curtailment", "Amortization", "Balloon payment", "Prepayment penalty"],
    correct: 0
},
{
    question: "One of the 36 longitudinal lines used in the rectangular survey system method of land description.",
    options: ["Principal meridian", "Baseline", "Section", "Township"],
    correct: 0
},
{
    question: "Mortgage insurance offered by private companies to mitigate the risk of the first 20-25% of the mortgage amount.",
    options: ["Private mortgage insurance (PMI)", "FHA insurance", "VA guarantee", "Title insurance"],
    correct: 0
},
{
    question: "The judicial procedure of proving the validity of a will.",
    options: ["Probate", "Testament", "Inheritance", "Codicil"],
    correct: 0
},
{
    question: "A method of land description based on principal meridians (lines of longitude) and baselines (lines of latitude). Also called the government survey system.",
    options: ["Rectangular survey system", "Metes and bounds", "Lot and block", "Recorded plat"],
    correct: 0
},
{
    question: "The statutory period of time during which an owner can reclaim foreclosed property by paying the debt owed, plus court costs and other charges established by statute.",
    options: ["Redemption period", "Grace period", "Foreclosure period", "Reinstatement period"],
    correct: 0
},
{
    question: "The illegal practice of lending institutions refusing to provide certain financial services, such as mortgage loans, to property owners in certain areas.",
    options: ["Redlining", "Steering", "Blockbusting", "Panic peddling"],
    correct: 0
},
{
    question: "The process of paying off one loan with the proceeds from a new loan using the same property as security or collateral.",
    options: ["Refinance transaction", "Subordination", "Recasting", "Forbearance"],
    correct: 0
},
{
    question: "Economic principle in which the value of over-improved property declines toward its surroundings.",
    options: ["Regression", "Progression", "Contribution", "Substitution"],
    correct: 0
},
{
    question: "Isequence of adjustments - in the sales comparison approach, adjustments to comparable characteristics should be made in the following order to find the appropriate value of the subject property: property rights, financing terms, conditions of sale, market conditions, location, and physical characteristics.",
    options: ["Sequence of adjustments", "Reconciliation", "Adjustment grid", "Comparable sequence"],
    correct: 0
},
{
    question: "Aservient tenement - a property on which an easement or right-of-way for an adjacent (dominant) property passes.",
    options: ["Servient tenement", "Dominant tenement", "Fee simple", "Easement appurtenant"],
    correct: 0
},
{
    question: "The amount of space between the lot line and the building line, usually established by a local zoning ordinance or restrictive covenants; see deed restrictions.",
    options: ["Setback", "Buffer zone", "Easement", "Encroachment"],
    correct: 0
},
{
    question: "Restrictions on the amount of land required surrounding improvements; the amount of space required between the building and lot line.",
    options: ["Setback, side yard, or rear yard", "Easement", "Right-of-way", "Zoning variance"],
    correct: 0
},
{
    question: "The form used to itemize all costs related to closing of a residential transaction covered by RESPA regulations.",
    options: ["Settlement statement (HUD-1)", "Closing disclosure", "Deed of trust", "Title report"],
    correct: 0
}
            ],
            astronauts: [
              {
    question: "The action that brings about the desired result. For example, if a broker takes actions that result in a sale, the broker is the procuring cause of the sale.",
    options: ["Procuring cause", "Dual agency", "Exclusive agency", "Subagency"],
    correct: 0
},
{
    question: "Also known as profit 'a prendre; right to remove items such as topsoil or minerals from land belonging to another.",
    options: ["Profit", "License", "Easement", "Servitude"],
    correct: 0
},
{
    question: "Economic principle in which the value of under-improved property increases toward its surroundings.",
    options: ["Progression", "Regression", "Contribution", "Substitution"],
    correct: 0
},
{
    question: "The debt instrument that details the terms of the loan.",
    options: ["Promissory note", "Mortgage", "Deed of trust", "Security agreement"],
    correct: 0
},
{
    question: "The operating of an income property for another.",
    options: ["Property management", "Leasing", "Brokerage", "Appraisal"],
    correct: 0
},
{
    question: "A tax levied by the government on property, real or personal.",
    options: ["Property tax", "Transfer tax", "Excise tax", "Sales tax"],
    correct: 0
},
{
    question: "Worth of a property; may have several different values depending on the interest or use involved. See market value, investment value, insurable value, assessed value, and going-concern value.",
    options: ["Property value", "Price", "Cost", "Equity"],
    correct: 0
},
{
    question: "In a cooperative building, the lease a corporation provides to the stockholders that allows them to use a specific unit under the conditions specified.",
    options: ["Proprietary lease", "Ground lease", "Net lease", "Percentage lease"],
    correct: 0
},
{
    question: "To divide ongoing property costs such as taxes or maintenance fees proportionately between buyer and seller at closing.",
    options: ["Prorate", "Adjust", "Apportion", "Assess"],
    correct: 0
},
{
    question: "A Latin phrase meaning \"for the life of another.\" In a life estate pur autre vie, the term of the estate is measured by the life of a person other than the person who holds the life estate.",
    options: ["Pur autre vie", "Life estate", "Fee simple", "Defeasible fee"],
    correct: 0
},
{
    question: "Mostly used for mass appraisals of single-family residences to determine assessed value",
    options: ["Regression analysis", "Comparative analysis", "Cost approach", "Income capitalization"],
    correct: 0
},
{
    question: "A Federal Reserve regulation that implements the federal Truth-in-Lending Act.",
    options: ["Regulation Z", "RESPA", "Regulation X", "Dodd-Frank Act"],
    correct: 0
},
{
    question: "A clause in a mortgage that releases a portion of the property upon payment of a portion of the loan.",
    options: ["Release clause", "Defeasance clause", "Acceleration clause", "Alienation clause"],
    correct: 0
},
{
    question: "A future interest in an estate that takes effect upon the termination of a life estate.",
    options: ["Remainder estate", "Reversionary interest", "Life estate", "Fee tail"],
    correct: 0
},
{
    question: "In a mortgage, the amount of principal that has not yet been repaid.",
    options: ["Remaining balance", "Principal balance", "Outstanding debt", "Loan amount"],
    correct: 0
},
{
    question: "The ownership of a property by only one legal entity.",
    options: ["Severalty", "Tenancy in common", "Joint tenancy", "Community property"],
    correct: 0
},
{
    question: "Loan made upon the security of an interest in real property that may obligate the borrower to pay to the lender a contingent deferred interest.",
    options: ["Shared appreciation mortgage", "Graduated payment mortgage", "Reverse mortgage", "Package mortgage"],
    correct: 0
},
{
    question: "Account in which equal installments of funds are deposited periodically to accumulate enough money to replace an asset or reach a specified target sum. See real estate math review, compound interest tables.",
    options: ["Sinking fund", "Reserve fund", "Escrow account", "Capital account"],
    correct: 0
},
{
    question: "Plot of land improved to the extent it is ready to be used for the purpose it was intended.",
    options: ["Site", "Parcel", "Lot", "Tract"],
    correct: 0
},
{
    question: "Detailed listing of factual data, including a legal description, title and record data, and information on pertinent characteristics.",
    options: ["Site description", "Survey", "Title report", "Property disclosure"],
    correct: 0
}
            ],
            history: [
                {
    question: "A written contract signed by the buyer and seller stating the terms and conditions under which a property will be sold.",
    options: ["Purchase agreement", "Listing agreement", "Option contract", "Lease agreement"],
    correct: 0
},
{
    question: "A mortgage given by a buyer to a seller to secure repayment of any loan used to pay part or all of the purchase price.",
    options: ["Purchase money mortgage", "Blanket mortgage", "Reverse mortgage", "Assumption mortgage"],
    correct: 0
},
{
    question: "A calculation to determine whether a borrower can qualify for a mortgage. There are two ratios. The top ratio is a calculation of the borrower's monthly housing costs (principal, taxes, insurance, mortgage insurance, homeowner's association fees) as a percentage of monthly income. The bottom ratio includes housing costs as well as all other monthly debt.",
    options: ["Qualifying ratio", "Debt-to-income ratio", "Loan-to-value ratio", "Cap rate"],
    correct: 0
},
{
    question: "Most comprehensive method of estimating building costs in which the quantity and quality of all materials and labor are estimated on a unit cost basis to arrive at a total cost estimate; it duplicates the contractor's method of developing a bid.",
    options: ["Quantity survey method", "Cost index method", "Unit-in-place method", "Square-foot method"],
    correct: 0
},
{
    question: "A conveyance whereby the grantor transfers without warranty or obligations whatever interest or title he or she may have.",
    options: ["Quitclaim deed", "Warranty deed", "Grant deed", "Bargain and sale deed"],
    correct: 0
},
{
    question: "Estimated time period during which operating income will be greater than operating expenses; the period over which improvements will continue to contribute to property value.",
    options: ["Remaining economic life", "Economic age", "Effective age", "Physical life"],
    correct: 0
},
{
    question: "The original amortization term minus the number of payments that have been applied to it.",
    options: ["Remaining term", "Loan term", "Maturity date", "Amortization period"],
    correct: 0
},
{
    question: "A lease clause that allows the lessee to extend the lease under specified terms for a certain period of time",
    options: ["Renewal options", "Escalation clause", "Option to purchase", "Right of first refusal"],
    correct: 0
},
{
    question: "A periodic payment paid by a lessee to a landlord for the use and possession of leased property.",
    options: ["Rent", "Lease fee", "Deposit", "Assessment"],
    correct: 0
},
{
    question: "The estimated current cost to replace an asset similar or equivalent to the one being appraised.",
    options: ["Replacement cost", "Reproduction cost", "Market value", "Cost basis"],
    correct: 0
},
{
    question: "Set aside to replace certain items in the future (e.g., roof replacement, carpeting, kitchen appliances).",
    options: ["Replacement reserve money", "Escrow account", "Operating reserve", "Maintenance fund"],
    correct: 0
},
{
    question: "The cost to construct an exact duplicate of a building at current prices using the same materials, standards, design, layout, and quality, and embodying all the subject's deficiencies, superadequacies, and obsolescence.",
    options: ["Reproduction cost", "Replacement cost", "Original cost", "Cost approach"],
    correct: 0
},
{
    question: "Canceling or terminating a contract by mutual consent or by the action of one party on default by the other party",
    options: ["Rescission", "Novation", "Assignment", "Breach"],
    correct: 0
},
{
    question: "Accounting allowance to provide for the maintenance and replacement of short-lived items (carpets, drapes, blinds, roof, etc.).",
    options: ["Reserve for replacement", "Maintenance reserve", "Capital expense", "Operating expense"],
    correct: 0
},
{
    question: "Value or income attributable to a component, such as financial, physical, or legal estate components, after deducting an amount necessary to meet a required return on the other component.",
    options: ["Residual", "Net income", "Equity", "Surplus"],
    correct: 0
},
{
    question: "Refers to compound interest and present value factors. See real estate math review, compound interest tables.",
    options: ["Six functions of a dollar", "Time value of money", "Rule of 72", "Capitalization rate"],
    correct: 0
},
{
    question: "In appraisal theory, one of four forces thought to influence property value; refers to population characteristics such as population age and distribution.",
    options: ["Social forces", "Economic forces", "Governmental forces", "Physical forces"],
    correct: 0
},
{
    question: "A type of company that has one owner who assumes all responsibilities.",
    options: ["Sole proprietorship", "Partnership", "Corporation", "Limited liability company"],
    correct: 0
},
{
    question: "A tax levied against only the specific properties that will benefit from a public improvement, such as a street or sewer; an assessment by a homeowners association for a capital improvement to the common areas for which no budgeted funds are available.",
    options: ["Special assessment", "Property tax", "Transfer tax", "Excise tax"],
    correct: 0
},
{
    question: "See conditional use.",
    options: ["Special use", "Variance", "Spot zoning", "Planned unit development"],
    correct: 0
}
            ],
            aliens: [
 {
    question: "Processes used in the income approach in which the unknown income from one component is derived by subtracting the known income from another component from the net operating income. The derived (residual) income is then capitalized to find the value of the corresponding component. Can be used for land-building or mortgage-equity components.",
    options: ["Residual techniques", "Capitalization method", "Income approach", "Cost approach"],
    correct: 0
},
{
    question: "A limitation on the way a property can be used.",
    options: ["Restriction (restrict covenant)", "Easement", "Zoning", "Encroachment"],
    correct: 0
},
{
    question: "When a homeowner receives monthly checks or a lump sum with no repayment until property is sold; usually an agreement between mortgagor and elderly homeowners.",
    options: ["Reverse annuity mortgage", "Graduated payment mortgage", "Equity loan", "Balloon mortgage"],
    correct: 0
},
{
    question: "A lessor's right to possess leased property at the termination of a lease. Also refers generally to sale of a property at the end of a holding period.",
    options: ["Reversion", "Remainder estate", "Life estate", "Fee simple"],
    correct: 0
},
{
    question: "An appraiser who inspects the reports of other appraisers to determine the validity of the conclusions and data given in the report.",
    options: ["Review appraiser", "Supervising appraiser", "Field appraiser", "Certified appraiser"],
    correct: 0
},
{
    question: "A revised or new version, as in a contract.",
    options: ["Revision", "Amendment", "Addendum", "Modification"],
    correct: 0
},
{
    question: "Change or amendment to a zoning map.",
    options: ["Rezoning", "Variance", "Special use", "Conditional use"],
    correct: 0
},
{
    question: "The right to enter or leave designated premises.",
    options: ["Right of egress (or ingress)", "Easement", "Access right", "Right of way"],
    correct: 0
},
{
    question: "The right of a person to have the first opportunity to purchase property before it is offered to anyone else.",
    options: ["Right of first refusal", "Option to purchase", "Purchase agreement", "Leasehold right"],
    correct: 0
},
{
    question: "The statutory right to reclaim ownership of property after a foreclosure sale.",
    options: ["Right of redemption", "Equity of redemption", "Foreclosure right", "Right of reversion"],
    correct: 0
},
{
    question: "A deed in which the grantor guarantees the title only against the defects that may have occurred during the grantor's ownership and not against any defects that occurred prior to that time.",
    options: ["Special warranty deed", "General warranty deed", "Quitclaim deed", "Bargain and sale deed"],
    correct: 0
},
{
    question: "Data collected dealing with the subject property and the comparable properties.",
    options: ["Specific date", "Effective date", "Valuation date", "Closing date"],
    correct: 0
},
{
    question: "A lien, such as a mortgage, that attaches to one defined parcel of real estate.",
    options: ["Specific lien", "General lien", "Judgment lien", "Mechanic's lien"],
    correct: 0
},
{
    question: "A legal action in which a court compels a defaulted party to a contract to perform according to the terms of the contract, rather than awarding damages.",
    options: ["Specific performance", "Rescission", "Reformation", "Compensatory damages"],
    correct: 0
},
{
    question: "Property held primarily for future sale; value based on the future highest and best use.",
    options: ["Speculative use", "Investment use", "Special use", "Industrial use"],
    correct: 0
},
{
    question: "In some states, an instrument given to the purchaser at the time of sale.",
    options: ["Tax deed", "Warranty deed", "Quitclaim deed", "Deed of trust"],
    correct: 0
},
{
    question: "A charge against a property created by law or statue.Tax liens take priority over all other types of liens.",
    options: ["Tax lien", "Mortgage lien", "Judgment lien", "Mechanic's lien"],
    correct: 0
},
{
    question: "The rate applied to the assessed value of a property to determine the property taxes.",
    options: ["Tax rate", "Millage rate", "Assessment rate", "Effective rate"],
    correct: 0
},
{
    question: "The court-ordered sale of a property after the owner fails to pay ad valorem taxes owed on the property.",
    options: ["Tax sale", "Foreclosure sale", "Auction sale", "Judicial sale"],
    correct: 0
},
{
    question: "The tenancy of a party who unlawfully retains possession of a landlord's property after the term of the lease has expired.",
    options: ["Tenancy at sufferance", "Tenancy at will", "Periodic tenancy", "Tenancy for years"],
    correct: 0
}
            ]
        };

        let currentMission = '';
        let currentCommand = 0;
        let successCount = 0;
        let answered = false;
        let userAnswers = [];
        let shuffledQuestions = [];

        // Shuffle function
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function launchMission(missionType) {
            currentMission = missionType;
            currentCommand = 0;
            successCount = 0;
            answered = false;
            userAnswers = [];
            
            // Shuffle questions and their choices
            const originalQuestions = missionData[missionType];
            shuffledQuestions = originalQuestions.map(q => {
                const correctAnswer = q.options[q.correct];
                const shuffledOptions = shuffleArray(q.options);
                const newCorrectIndex = shuffledOptions.indexOf(correctAnswer);
                
                return {
                    question: q.question,
                    options: shuffledOptions,
                    correct: newCorrectIndex
                };
            });
            
            // Shuffle the order of questions too
            shuffledQuestions = shuffleArray(shuffledQuestions);
            
            document.getElementById('missionSelection').style.display = 'none';
            document.getElementById('missionSession').classList.add('active');
            
            showCommand();
        }

        function showCommand() {
            const command = shuffledQuestions[currentCommand];
            
            document.getElementById('commandText').textContent = command.question;
            
            const responseGrid = document.getElementById('responseGrid');
            responseGrid.innerHTML = '';
            
            command.options.forEach((option, index) => {
                const responseElement = document.createElement('button');
                responseElement.className = 'response-panel';
                responseElement.textContent = option;
                
                const previousAnswer = userAnswers[currentCommand];
                if (previousAnswer !== undefined) {
                    if (index === command.correct) {
                        responseElement.classList.add('correct');
                    } else if (index === previousAnswer && index !== command.correct) {
                        responseElement.classList.add('incorrect');
                    }
                    responseElement.style.pointerEvents = 'none';
                } else {
                    responseElement.onclick = () => executeCommand(index);
                }
                
                responseGrid.appendChild(responseElement);
            });
            
            updateHUD();
        }

        function executeCommand(selectedIndex) {
            if (answered) return;
            
            answered = true;
            const command = shuffledQuestions[currentCommand];
            const options = document.querySelectorAll('.response-panel');
            
            userAnswers[currentCommand] = selectedIndex;
            
            options.forEach((option, index) => {
                if (index === command.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== command.correct) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            });
            
            if (selectedIndex === command.correct) {
                successCount++;
            }
            
            document.getElementById('nextCommand').style.display = 'block';
            updateHUD();
        }

        function updateHUD() {
            document.getElementById('commandCounter').textContent = `CMD: ${currentCommand + 1}/${shuffledQuestions.length}`;
            document.getElementById('successCounter').textContent = `SUCCESS: ${successCount}`;
            
            const progress = ((currentCommand + 1) / shuffledQuestions.length) * 100;
            document.getElementById('progressBeam').style.width = progress + '%';
            
            const prevBtn = document.getElementById('prevCommand');
            prevBtn.disabled = currentCommand === 0;
            
            const wasAnswered = userAnswers[currentCommand] !== undefined;
            if (wasAnswered) {
                document.getElementById('nextCommand').style.display = 'block';
                answered = true;
            } else {
                document.getElementById('nextCommand').style.display = 'none';
                answered = false;
            }
        }

        function previousCommand() {
            if (currentCommand > 0) {
                currentCommand--;
                answered = false;
                showCommand();
            }
        }

        function nextCommand() {
            currentCommand++;
            
            if (currentCommand < shuffledQuestions.length) {
                answered = false;
                showCommand();
            } else {
                completeMission();
            }
        }

        function completeMission() {
            document.getElementById('missionSession').classList.remove('active');
            document.getElementById('missionComplete').classList.add('active');
            
            const totalCommands = shuffledQuestions.length;
            const percentage = Math.round((successCount / totalCommands) * 100);
            
            document.getElementById('finalSuccess').textContent = `${successCount}/${totalCommands}`;
            document.getElementById('successRate').textContent = `${percentage}%`;
            
            let report = '';
            let icon = '';
            
            if (percentage >= 80) {
                report = 'Outstanding performance, Commander! Your exceptional knowledge of space exploration has earned you the rank of Space Admiral. You are ready to lead humanity\'s next great adventure among the stars. Mission Control is impressed with your stellar results!';
                icon = '🏆';
            } else if (percentage >= 60) {
                report = 'Excellent work, Commander! Your solid understanding of space science qualifies you for advanced missions. You have demonstrated the skills needed for deep space exploration. Continue your training to reach Admiral status!';
                icon = '🚀';
            } else if (percentage >= 40) {
                report = 'Good effort, Cadet! Your basic space knowledge shows promise for future missions. With additional study and training, you will be ready for more challenging space operations. Keep reaching for the stars!';
                icon = '🛰️';
            } else {
                report = 'Mission incomplete, Recruit. Your space knowledge needs significant improvement before you can be cleared for orbital missions. Report to the training facility for additional preparation. Every astronaut started somewhere!';
                icon = '📡';
            }
            
            document.getElementById('commanderReport').textContent = report;
            document.getElementById('completeIcon').textContent = icon;
        }

        function abortMission() {
            document.getElementById('missionSession').classList.remove('active');
            document.getElementById('missionSelection').style.display = 'block';
        }

        function newMission() {
            document.getElementById('missionComplete').classList.remove('active');
            document.getElementById('missionSelection').style.display = 'block';
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98690d3281154045',t:'MTc1OTEyMzQzOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>


